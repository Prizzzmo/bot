<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>История России на карте</title>
    <script src="https://telegram.org/js/telegram-web-app.js"></script>
    <link rel="stylesheet" href="https://unpkg.com/leaflet@1.7.1/dist/leaflet.css">
    <script src="https://unpkg.com/leaflet@1.7.1/dist/leaflet.js"></script>
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/leaflet.markercluster@1.5.3/dist/MarkerCluster.css">
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/leaflet.markercluster@1.5.3/dist/MarkerCluster.Default.css">
    <script src="https://cdn.jsdelivr.net/npm/leaflet.markercluster@1.5.3/dist/leaflet.markercluster.js"></script>
    <link rel="stylesheet" href="styles.css">
</head>
<body>
    <div id="app">
        <div class="header">
            <h1>История России на карте</h1>
            <div class="filter-controls">
                <select id="category-filter">
                    <option value="all">Все категории</option>
                </select>
                <select id="century-filter">
                    <option value="all">Все века</option>
                </select>
                <button id="reset-filters">Сбросить фильтры</button>
            </div>
        </div>

        <div id="map-container">
            <div id="map"></div>
        </div>

        <div id="event-details" class="hidden">
            <button id="close-details">✕</button>
            <h2 id="event-title"></h2>
            <div id="event-date"></div>
            <div id="event-category"></div>
            <p id="event-description"></p>
        </div>

        <div class="admin-button-container">
            <button id="admin-button">Администрирование</button>
        </div>
    </div>

    <div id="admin-panel" class="hidden">
        <div class="admin-panel-header">
            <h2>Панель администратора</h2>
            <button id="close-admin-panel">✕</button>
        </div>
        <div class="admin-tabs">
            <button class="tab-button active" data-tab="stats">Статистика</button>
            <button class="tab-button" data-tab="admins">Управление админами</button>
            <button class="tab-button" data-tab="logs">Просмотр логов</button>
            <button class="tab-button" data-tab="settings">Настройки</button>
            <button class="tab-button" data-tab="maintenance">Обслуживание</button>
        </div>
        <div class="admin-content">
            <div id="stats-tab" class="tab-content active">
                <h3>Статистика бота</h3>
                <div id="stats-content" class="admin-data-container">
                    <p>Загрузка статистики...</p>
                </div>
                <div class="admin-controls">
                    <button id="refresh-stats">Обновить статистику</button>
                    <button id="show-user-stats">Подробная статистика пользователей</button>
                    <button id="show-system-info">Информация о системе</button>
                </div>
            </div>
            <div id="admins-tab" class="tab-content">
                <h3>Управление администраторами</h3>
                <div id="admins-content" class="admin-data-container">
                    <p>Загрузка списка администраторов...</p>
                </div>
                <div class="admin-controls">
                    <input type="text" id="new-admin-id" placeholder="ID пользователя">
                    <button id="add-regular-admin">Добавить админа</button>
                    <button id="add-super-admin">Добавить супер-админа</button>
                    <button id="refresh-admins">Обновить список</button>
                </div>
            </div>
            <div id="logs-tab" class="tab-content">
                <h3>Журнал логов</h3>
                <div id="logs-content" class="admin-data-container logs-container">
                    <p>Загрузка логов...</p>
                </div>
                <div class="admin-controls">
                    <button id="refresh-logs">Обновить логи</button>
                    <button id="clear-logs">Очистить логи</button>
                    <select id="logs-level">
                        <option value="all">Все уровни</option>
                        <option value="info">Информация</option>
                        <option value="warning">Предупреждения</option>
                        <option value="error">Ошибки</option>
                    </select>
                </div>
            </div>
            <div id="settings-tab" class="tab-content">
                <h3>Настройки бота</h3>
                <div id="settings-content" class="admin-data-container">
                    <div class="setting-item">
                        <label>
                            <input type="checkbox" id="setting-auto-update"> Автоматическое обновление тем
                        </label>
                    </div>
                    <div class="setting-item">
                        <label>
                            <input type="checkbox" id="setting-statistics"> Сбор статистики
                        </label>
                    </div>
                    <div class="setting-item">
                        <label>
                            <input type="checkbox" id="setting-dev-mode"> Режим разработчика
                        </label>
                    </div>
                    <div class="setting-item">
                        <label>
                            <input type="checkbox" id="setting-private-mode"> Приватный режим
                        </label>
                    </div>
                    <div class="setting-item">
                        <label>
                            <input type="checkbox" id="setting-notifications"> Уведомления
                        </label>
                    </div>
                    <div class="setting-item">
                        <label>Уровень логирования:
                            <select id="setting-log-level">
                                <option value="DEBUG">DEBUG</option>
                                <option value="INFO">INFO</option>
                                <option value="WARNING">WARNING</option>
                                <option value="ERROR">ERROR</option>
                            </select>
                        </label>
                    </div>
                    <div class="setting-item">
                        <label>Макс. сообщений на пользователя:
                            <input type="number" id="setting-max-messages" min="10" max="1000">
                        </label>
                    </div>
                </div>
                <div class="admin-controls">
                    <button id="save-settings">Сохранить настройки</button>
                    <button id="reset-settings">Сбросить изменения</button>
                </div>
            </div>
            <div id="maintenance-tab" class="tab-content">
                <h3>Техническое обслуживание</h3>
                <div class="admin-data-container">
                    <div class="maintenance-actions">
                        <div class="maintenance-action">
                            <h4>Очистка кэша</h4>
                            <p>Очистить кэш API и другие временные данные.</p>
                            <button id="clear-cache">Очистить кэш</button>
                        </div>
                        <div class="maintenance-action">
                            <h4>Резервное копирование</h4>
                            <p>Создать резервную копию всех данных бота.</p>
                            <button id="create-backup">Создать резервную копию</button>
                        </div>
                        <div class="maintenance-action">
                            <h4>Обновление данных API</h4>
                            <p>Принудительное обновление кэшированных данных API.</p>
                            <button id="update-api">Обновить данные API</button>
                        </div>
                        <div class="maintenance-action">
                            <h4>Перезапуск бота</h4>
                            <p>Перезапустить бота (требуется подтверждение).</p>
                            <button id="restart-bot">Перезапустить</button>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <script src="app.js"></script>
</body>
</html>