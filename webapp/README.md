
# Веб-приложение интерактивных исторических карт

Данное веб-приложение является частью проекта "Образовательный бот по истории России" и обеспечивает визуализацию исторических событий и периодов на интерактивных картах.

## Обзор

Веб-приложение предоставляет следующие функции:
- Отображение интерактивных исторических карт
- Визуализация важных исторических событий и сражений
- Временные линии исторических периодов
- Интеграция с Telegram-ботом через WebApp

## Компоненты

### Серверная часть
- `server.py` - Flask-сервер для обработки запросов и рендеринга карт
- `bot_integration.py` - Компонент интеграции с Telegram-ботом

### Клиентская часть
- `index.html` - Основной HTML шаблон веб-приложения
- `styles.css` - Файл стилей для интерфейса
- `app.js` - JavaScript для интерактивных функций карт

## Запуск приложения

Для запуска веб-приложения отдельно от бота:
```bash
python run_webapp.py
```

Для запуска бота и веб-приложения одновременно:
```bash
python run_combined.py
```

По умолчанию веб-сервер запускается на порту 8080.

## Интеграция с ботом

Веб-приложение интегрируется с Telegram-ботом через Telegram WebApp API. Это позволяет пользователям открывать интерактивные карты непосредственно из чата с ботом.

### Процесс интеграции:

1. Пользователь запрашивает карту в боте
2. Бот генерирует ссылку на веб-приложение с параметрами запроса
3. Веб-приложение отображает необходимую карту
4. Пользователь может взаимодействовать с картой и возвращаться в чат с ботом

## Технологии

- Python Flask - бэкенд сервер
- Folium - создание интерактивных карт
- JavaScript - интерактивные функции на клиентской стороне
- HTML/CSS - пользовательский интерфейс
- Telegram WebApp API - интеграция с Telegram

## Структура карт

Приложение поддерживает несколько типов визуализаций:

### 1. Карты сражений
Отображение мест значимых сражений с информацией о противоборствующих сторонах, командующих и результатах.

### 2. Карты изменения границ
Визуализация территориальных изменений государства в разные исторические периоды.

### 3. Временные линии
Хронологическое представление последовательности исторических событий.

## Разработка и расширение

### Добавление нового типа карт

1. Создайте новую функцию генерации карты в `src/history_map.py`
2. Добавьте соответствующий маршрут в `webapp/server.py`
3. Обновите клиентскую часть в `webapp/app.js` для поддержки нового типа карт

### Улучшение интерфейса

Для улучшения пользовательского интерфейса вы можете модифицировать:
- `webapp/styles.css` - стили веб-приложения
- `webapp/index.html` - HTML структуру
- `webapp/app.js` - JavaScript логику

## Безопасность

- Валидация всех входящих параметров
- Ограничение доступа к API ключам
- Проверка источника запросов (Telegram WebApp)

---

*© 2025 Образовательный бот по истории России*
